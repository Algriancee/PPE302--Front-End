<div class="layout">

  <!-- ================= HEADER ================= -->
  <header class="header">

    <nav class="navbar">

      <!-- LOGO -->
      <div class="logo-section">
        <img src="/assets/logo.png" alt="Logo" class="logo" />
        <span class="brand">RelatFoot</span>
      </div>

      <!-- MENU 
      <ul class="nav-links">
        <li><a routerLink="/Accueille">Accueil</a></li>
        <li><a routerLink="/Inscription">S'inscrire</a></li>
        <li><a routerLink="/Page-joueurs">Joueurs</a></li>
        <li><a routerLink="/page-Agents">Agents</a></li>
        <li><a routerLink="/Connexion">Contact</a></li>
      </ul>-->

      <!-- USER INFO -->
      <div class="user-box" *ngIf="user">
        <div class="avatar">{{ user.email.charAt(0).toUpperCase() }}</div>

        <div class="user-details">
          <span class="email">{{ user.email }}</span>
          <span class="role">{{ user.role }}</span>
        </div>

        <button class="logout-btn" (click)="logout()">DÃ©connexion</button>
      </div>

    </nav>
  </header>

  <!-- ================= SIDEBAR ================= -->
  <aside class="sidebar">

    <h2 class="sidebar-title">Mon Espace Joueur</h2>

    <nav class="sidebar-menu">

      <button class="side-btn"
              [class.active]="section === 'joueur'"
              (click)="section = 'joueur'">
        ðŸ‘¤ Informations Joueur
      </button>

      <button class="side-btn"
              [class.active]="section === 'profil'"
              (click)="section = 'profil'">
        ðŸ“„ Profil Joueur
      </button>

      <button class="side-btn"
              [class.active]="section === 'medias'"
              (click)="section = 'medias'">
        ðŸŽ¥ MÃ©dias
      </button>

    </nav>
  </aside>

  <!-- ================= CONTENT ================= -->
  <main class="content">

    <!-- MINI HEADER DU CONTENT 
    <div class="content-header">
      <h1>Profil Joueur</h1>
      <button class="logout-btn small" (click)="logout()">DÃ©connexion</button>
    </div>
    </div> -->

    <!-- ================= SECTION INFO ================= -->
    <section *ngIf="section === 'joueur'" class="card">
      <h2>Informations du Joueur</h2>

      <form (ngSubmit)="joueurs.id ? updateJoueur() : createJoueur()" class="form-grid">

        <div class="form-group">
          <label>Nom</label>
          <input [(ngModel)]="joueurs.nom" name="nom" required />
        </div>

        <div class="form-group">
          <label>PrÃ©noms</label>
          <input [(ngModel)]="joueurs.prenoms" name="prenoms" required />
        </div>

        <div class="form-group">
          <label>Email</label>
          <input [(ngModel)]="joueurs.email" name="email" readonly />
        </div>

        <div class="form-group">
          <label>TÃ©lÃ©phone</label>
          <input [(ngModel)]="joueurs.telephone" name="telephone" />
        </div>

        <div class="form-group">
          <label>Poste</label>
          <input [(ngModel)]="joueurs.poste" name="poste" />
        </div>

        <div class="form-group">
          <label>NationalitÃ©</label>
          <input [(ngModel)]="joueurs.nationalite" name="nationalite" />
        </div>

        <div class="form-group">
          <label>Taille (cm)</label>
          <input type="number" [(ngModel)]="joueurs.taille" name="taille" />
        </div>

        <div class="form-group">
          <label>Poids (kg)</label>
          <input type="number" [(ngModel)]="joueurs.poids" name="poids" />
        </div>

        <div class="form-group">
          <label>Pied fort</label>
          <input [(ngModel)]="joueurs.piedFort" name="piedFort" />
        </div>

        <div class="form-group">
          <label>Niveau</label>
          <input [(ngModel)]="joueurs.niveau" name="niveau" />
        </div>

        <button class="btn-primary full">
          {{ joueurs.id ? 'Mettre Ã  jour' : 'CrÃ©er mon profil joueur' }}
        </button>

      </form>
    </section>

    <!-- ================= SECTION PROFIL ================= -->
    <section *ngIf="section === 'profil'" class="card">
      <h2>Profil Joueur</h2>

      <form (ngSubmit)="profil.id ? updateProfil() : createProfil()" class="form-column">

        <div class="form-group">
          <label>Biographie</label>
          <textarea [(ngModel)]="profil.biographie" name="biographie"></textarea>
        </div>

        <div class="form-group">
          <label>Parcours</label>
          <textarea [(ngModel)]="profil.parcours" name="parcours"></textarea>
        </div>

        <div class="form-group">
          <label>PalmarÃ¨s</label>
          <textarea [(ngModel)]="profil.palmares" name="palmares"></textarea>
        </div>

        <div class="btn-row">
          <button class="btn-primary">
            {{ profil.id ? 'Mettre Ã  jour' : 'CrÃ©er profil' }}
          </button>

          <button class="btn-danger" *ngIf="profil.id" type="button" (click)="deleteProfil()">
            Supprimer
          </button>
        </div>

      </form>

      <div *ngIf="profil.id" class="info-box">
        <h3>Profil actuel :</h3>
        <p><strong>Biographie :</strong> {{ profil.biographie }}</p>
        <p><strong>Parcours :</strong> {{ profil.parcours }}</p>
        <p><strong>PalmarÃ¨s :</strong> {{ profil.palmares }}</p>
      </div>
    </section>

    <!-- ================= SECTION MEDIAS ================= -->
    <section *ngIf="section === 'medias'" class="card">
      <h2>Vos MÃ©dias</h2>

      <form (ngSubmit)="createMedia()" class="form-grid">

        <div class="form-group">
          <label>Type</label>
          <input [(ngModel)]="mediaForm.type" name="type" placeholder="VIDEO, CV..." />
        </div>

        <div class="form-group">
          <label>URL</label>
          <input [(ngModel)]="mediaForm.url" name="url" placeholder="https://..." />
        </div>

        <div class="form-group">
          <label>Description</label>
          <input [(ngModel)]="mediaForm.description" name="description" />
        </div>

        <button class="btn-primary full">Ajouter mÃ©dia</button>

      </form>

      <div class="media-list">
        <div *ngFor="let media of medias" class="media-item">

          <div>
            <h3>{{ media.type }}</h3>
            <p>{{ media.description }}</p>
            <a [href]="media.url" target="_blank" class="media-link">Voir</a>
          </div>

          <button class="btn-danger small" (click)="deleteMedia(media.id!)">
            Supprimer
          </button>

        </div>
      </div>
    </section>

  </main>

  <!-- ================= FOOTER ================= -->
  <footer class="footer">
    Â© 2025 RelatFoot â€” Espace Joueur
  </footer>

</div>
